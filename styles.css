/* ---------- Reset ---------- */
  *, *::before, *::after { box-sizing: border-box }
  html, body { height: 100% }
  html, body { -webkit-user-select: none; user-select: none; -webkit-touch-callout: none; }

  body{
    margin:0; background:#1f4d4d; color:#111;
    font-family:"aktiv-grotesk",-apple-system,system-ui,"Segoe UI",Roboto,Arial,sans-serif;
    -webkit-font-smoothing:antialiased;
    display:flex; justify-content:center; align-items:stretch;
    padding: 10px 10px calc(env(safe-area-inset-bottom, 0px) + 10px) 10px;
    min-height: 100dvh;
    height: 100dvh;
    overflow:hidden;
  }

  :root{
    --card-max:420px; --gap:8px; --tile:56px; --pad:var(--gap);
    --tape-min:120px; --results-min:140px; --history-min:40px; --output-min:40px;
    --results-pad-top: var(--pad);
    --results-pad-bottom: var(--pad);

    /* theme */
    --card:#fff; --display-bg:#02210a; --display-text:#0f0;

    /* legacy role defaults */
    --num:khaki; --op:gold; --frac:#64b5f6; --dec:darkkhaki; --clear:lightcoral; --mem:lightskyblue;

    /* Bezel */
    --bezel-radius:22px; --bezel-rim-radius:16px; --bezel-pad:6px;
    --bezel-outer:#1a1f1f; --bezel-inner:#0f1515;
    --bezel-hi:rgba(255,255,255,.07); --bezel-lo:rgba(0,0,0,.65); --bezel-divider:rgba(255,255,255,.08);
  }



  /* ---------- Card (stacked zones) ---------- */
.card{
  width:clamp(320px,100%,var(--card-max)); height:100%;
  display:grid; gap:var(--gap);
  grid-template-rows:auto auto 1fr;
  grid-template-areas:
    "bezel"
    "memory"
    "keypad";
}

  .panel{
    background:var(--card); border-radius:8px; background-color:darkslategrey;
    box-shadow:0 8px 24px rgba(0,0,0,.15); overflow:hidden;
  }
  .pad{ padding:var(--pad) }
  .bezel .tape .center-line { left: var(--center-line-left, 50.1%) !important; }

  /* ===== Bezel ===== */
  .bezel{ grid-area:bezel }
  .bezel{
    background:linear-gradient(#2a2f2f,darkslategray);
    border-radius:calc(var(--bezel-radius) + 6px);
    padding:11px;
    box-shadow: 0 18px 40px rgba(0,0,0,.55), inset 0 2px 6px rgba(255,255,255,.03);
  }
  .bezel__rim{
    background:var(--bezel-inner); border-radius:var(--bezel-rim-radius); padding:var(--bezel-pad);
    box-shadow: inset 0 2px 0 var(--bezel-hi), inset 0 -2px 0 var(--bezel-lo), 0 0 0 1px #000;
    overflow:hidden;
    display:grid; grid-template-rows: minmax(var(--tape-min), auto) minmax(var(--results-min), 1fr);
  }
  .bezel .panel{ border-radius:0; box-shadow:none; background:transparent; }
  .bezel .tape{ border-top-left-radius:16px; border-top-right-radius:16px; border-bottom-left-radius:11px; border-bottom-right-radius:11px;}
  .bezel .results{ border-bottom-left-radius:12px; border-bottom-right-radius:12px; }
  .bezel .results .output{ border-top:1px solid var(--bezel-divider); }
  .tape-inner{ box-shadow: inset 0 0 0 2px rgba(0,0,0,.55); }

  /* ---------- Tape ---------- */
  .tape{ position:relative; min-height:var(--tape-min); }
  .tape-inner{
    position:absolute; inset:0; border:1px solid #000;
    background:linear-gradient(to bottom,
      rgba(189,183,107,.3) 0%, rgba(255,215,0,.6) 6%, #ff0 25%, #ff0 75%,
      rgba(189,183,107,.6) 98%, rgba(255,215,0,.8) 100%);
  }
  #tape{ touch-action:none; cursor:pointer; }
  .center-line{ position:absolute; top:29%; left:50.1%; width:5px; height:75%; background:red; transform:translateX(-50%); }
  .tick{ position:absolute; bottom:0; width:3px; background:#000; }
  .tick.small{ height:19px } .tick.med{ height:39px } .tick.lg{ height:60px } .tick.num{ height:80px }
  .tick-label{
    position:absolute; bottom:85px; width:50px; text-align:center; transform:translateX(-50%);
    font-size:22px; font-weight:600; line-height:1; letter-spacing:.02em;
    font-feature-settings:"tnum" 1; font-variant-numeric:tabular-nums;
    filter:url(#textInnerShadow);
  }
  .sweep{ position:absolute; inset:0; pointer-events:none; }
  .sweep::before{
    content:""; position:absolute; left:100%; top:0; width:100%; height:100%;
    background:linear-gradient(120deg, rgba(0,0,0,.08), rgba(0,0,0,.28) 50%, rgba(0,0,0,.08));
    transform:skewX(20deg); opacity:0;
  }
  @keyframes sweep{ 0%{left:100%;opacity:.6} 100%{left:-100%;opacity:0} }
  .sweep.animate::before{ animation:sweep .8s ease-in-out forwards; }
  /* ---------- Results ---------- */
  .results{ background:var(--display-bg); color:var(--display-text); min-height:0; }
  .results .pad{
    display:flex; flex-direction:column; gap:8px; height:100%;
    padding-top:var(--results-pad-top, var(--pad));
    padding-bottom:var(--results-pad-bottom, var(--pad));
  }
  .history-row{
    display:flex;
    align-items:flex-start;
    gap:8px;
  }
  .history{
    min-height:var(--history-min); flex:1 1 auto; max-height:100%;
    overflow:auto;
    font-size:clamp(26px, 3.35vw, 28px);
    display:flex; flex-direction:column; gap:4px;
  }
  .row.input{ letter-spacing:.04em; font-size:clamp(20px, 3.1vw, 26px); opacity:.9; }
  #inputLine{ display:block; }
  .output{
    display:flex; justify-content:space-between; gap:8px;
    font-size:clamp(24px, 3.1vw, 26px);
    color:#bdfcb7; padding-top:6px;
    border-top:1px solid rgba(255,255,255,.1);
    min-height:var(--output-min);
  }
  /* Re-enable selection for history and outputs */
  .history, .output, .output *{ -webkit-user-select:text; user-select:text; }

  .eq-save-btn{
    width:40px; height:40px;
    border-radius:999px;
    border:0;
    display:grid; place-items:center;
    font-size:18px; font-weight:700;
    cursor:pointer;
    background:#0e5f3a;
    color:#dfffe0;
    box-shadow:0 1px 3px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.12);
    flex-shrink:0;
    align-self:flex-start;
  }
  .eq-save-btn:hover{
    filter:brightness(1.07);
    box-shadow:0 3px 8px rgba(0,0,0,.4), inset 0 1px 0 rgba(255,255,255,.16);
  }
  .eq-save-btn:active{
    transform:translateY(1px) scale(.98);
    box-shadow:inset 0 2px 5px rgba(0,0,0,.45);
  }
  .eq-save-btn:focus-visible{
    outline:2px solid #0ea5a5;
    outline-offset:2px;
  }

  /* ---------- Memory ---------- */
  .memory{ grid-area:memory }
  .memory-grid{ display:grid; gap:var(--gap); grid-template-columns:repeat(5,1fr); grid-template-rows:repeat(1,var(--tile)); }

  /* ---------- Console (5×4) ---------- */
  .console{ grid-area:console }
  .console-grid{
    margin-top:-8px; display:grid; gap:var(--gap);
    grid-template-columns:repeat(5,1fr);
    grid-template-rows:repeat(4,var(--tile));
  }
  .r1{grid-row:1}.r2{grid-row:2}.r3{grid-row:3}.r4{grid-row:4}
  .c1{grid-column:1}.c2{grid-column:2}.c3{grid-column:3}.c4{grid-column:4}.c5{grid-column:5}

  /* ---------- Fractions (5×3) ---------- */
  .fractions{ grid-area:fractions }
  .fract-grid{
    margin-top:8px; display:grid; gap:var(--gap);
    grid-template-columns:repeat(5,1fr);
    grid-template-rows:repeat(3,var(--tile));
  }

  /* ---------- Buttons (updated) ---------- */
  .btn{
    --btn-bg:var(--_btn-bg, var(--num));
    --btn-fg:var(--_btn-fg, currentColor);
    --btn-img:var(--_btn-img, none);

    width:100%; height:100%;
    display:grid; place-items:center;
    border:0; border-radius:5px; font-weight:600;
    font-size:clamp(14px, calc(var(--tile)*.42), 20px);
    color:var(--btn-fg);

    background-image:var(--btn-img), linear-gradient(var(--btn-bg), var(--btn-bg));
    background-repeat:no-repeat; background-size:cover, auto;
    box-shadow:0 2px 4px rgba(0,0,0,.2), inset 0 1px 0 rgba(255,255,255,.12);
    -webkit-tap-highlight-color:transparent;
    position:relative; overflow:hidden; touch-action:manipulation;

    /* Smooth fade back after release */
    filter: brightness(1) saturate(1);
    transition: filter .35s ease, transform .12s ease, box-shadow .2s ease;
  }

  /* Role variants */
  .btn.operator{ --_btn-bg:var(--op);   --_btn-fg:#111; }
  .btn.frac    { --_btn-bg:var(--frac); --_btn-fg:#063c67; }
  .btn.dec     { --_btn-bg:var(--dec);  --_btn-fg:#0c3a10; }
  .btn.clear,
  .btn.back    { --_btn-bg:var(--clear);--_btn-fg:#fff; }
  .btn.mem     { --_btn-bg:var(--mem);  --_btn-fg:#083f3f; }

  /* Hover (only on devices that support hover) */
  @media (hover:hover){
    .btn:hover{
      background-image:var(--btn-img), linear-gradient(
        color-mix(in oklab, var(--btn-bg), white var(--hover-lift, 20%)),
        color-mix(in oklab, var(--btn-bg), white var(--hover-lift, 20%))
      );
      box-shadow:0 4px 10px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.14);
      transform: translateY(-0.5px);
    }
    .btn.frac:hover{ --btn-bg: color-mix(in oklab, var(--btn-bg), white 12%); }
  }

  /* Pressed while finger is down — fades back via the base transition */
  .btn:active{
    filter: brightness(.82) saturate(1.05);
    transform: translateY(1px) scale(.985);
    box-shadow: inset 0 2px 6px rgba(0,0,0,.35), inset 0 -1px 0 rgba(255,255,255,.06);
  }

  /* Disabled */
  .btn[disabled]{
    opacity:.5; filter: saturate(.15) brightness(1); pointer-events:none;
  }

  /* Text/selection guards */
  .btn, .btn .btn-label{ -webkit-user-select:none; user-select:none; -webkit-touch-callout:none; }
  .btn .btn-label{ line-height:1; filter:url(#textInnerShadow); }
  .btn .btn-label::selection{ background:transparent; color:inherit; }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce){
    .btn{ transition:none; }
  }

  /* Focus */
  .btn:focus-visible{ outline:2px solid #0ea5a5; outline-offset:2px; }

  /* --- Press ripple --- */
  .ripple{
    position:absolute; border-radius:999px; pointer-events:none;
    transform:translate(-50%,-50%) scale(0); opacity:.35; background:rgba(255,255,255,.65);
    animation:ripple .45s ease-out forwards;
  }
  @keyframes ripple{ to{ transform:translate(-50%,-50%) scale(14); opacity:0 } }

  /* --- Hold arming pulse --- */
  .btn.hold{ box-shadow:0 0 0 0 rgba(14,165,165,.55); animation:pulseRing 1s ease-out infinite; }
  @keyframes pulseRing{ 0%{box-shadow:0 0 0 0 rgba(14,165,165,.55)} 100%{box-shadow:0 0 0 12px rgba(14,165,165,0)} }

  /* Memory “saved” flash */
  .btn.mem.saved{
    --btn-bg: color-mix(in oklab, var(--mem), #22c55e 46%);
    box-shadow:0 0 0 2px #22c55e inset, 0 0 16px rgba(34,197,94,.35);
    animation:pop .16s ease;
  }
  .btn.mem.saved::after{
    content:"✓"; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-weight:800; font-size:1.1em; color:#063; opacity:.95; pointer-events:none;
  }
  @keyframes pop{ from{transform:scale(.97)} to{transform:scale(1)} }

  /* Copy toast */
  #copyToast{
    position:fixed; left:50%; transform:translateX(-50%); bottom:12px;
    background:#111; color:#fff; padding:8px 12px; border-radius:8px;
    display:none; gap:8px; align-items:center; z-index:45; box-shadow:0 8px 24px rgba(0,0,0,.25);
    font-size:14px;
  }
	  
	  
	/* Link tiles on the landing card */
.link-grid {
  display:grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 8px;
}
.tile {
  display:grid; align-content:center; gap:6px;
  min-height: 86px; border-radius: 12px; padding: 10px;
  background: linear-gradient(180deg, #162121, #0f1515);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.04), 0 6px 18px rgba(0,0,0,.25);
  border: 1px solid rgba(255,255,255,.08);
}
.tile a { color:#aef; font-weight:700; text-decoration:none }
.tile small { color:#9ed; opacity:.9 }

/* Little inline pills for legends/icons */
.pill {
  display:inline-grid; place-items:center; padding:2px 8px; border-radius:999px;
  background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12);
  font-weight:700; font-size:.9em; color:#dff;
}

/* Keep your existing #installBtn look consistent inside slides */
#installBtn { background:#0ea5a5; color:#111; border:none; border-radius:8px; padding:8px 12px; cursor:pointer; display:none }

/* ===== Tools Modal (tabs) ===== */
/* Backdrop / container */
.cm-backdrop{
  position: fixed;
  inset: 0;
  display: none;                  /* toggled via aria-hidden */
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,.45);
  z-index: 30;
  -webkit-backdrop-filter: blur(2px);
  backdrop-filter: blur(2px);
}
.cm-backdrop[aria-hidden="false"]{ display:flex; }

.cm-modal{
  /* match app bezel aesthetics */
  background: linear-gradient(#2a2f2f, #152222);
  border-radius: calc(var(--bezel-radius, 22px));
  box-shadow: 0 18px 40px rgba(0,0,0,.55), inset 0 2px 6px rgba(255,255,255,.03);
  color: #e9f5f5;

  width: min(96vw, 780px);
  height: min(90vh, 860px);

  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* Title bar */
.cm-headbar{
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 14px;
  background: var(--bezel-inner, #0f1515);
  border-bottom: 1px solid var(--bezel-divider, rgba(255,255,255,.08));
}
.cm-headbar h2{
  margin: 0;
  font-size: clamp(16px, 2.6vw, 18px);
  letter-spacing: .02em;
  color: #d7f0f0;
}

.cm-iconbtn{
  appearance: none;
  background: transparent;
  border: 0;
  color: #d7f0f0;
  font-size: 18px;
  cursor: pointer;
  width: 32px; height: 32px;
  border-radius: 8px;
}
.cm-iconbtn:hover{ background: rgba(255,255,255,.07); }
.cm-iconbtn:focus-visible{ outline: 2px solid #0ea5a5; outline-offset: 2px; }

/* Tabs */
.cm-tabs{
  display: flex;
  gap: 8px;
  padding: 8px 10px;
  background: linear-gradient(180deg, #0f1515, #101b1b);
  border-bottom: 1px solid var(--bezel-divider, rgba(255,255,255,.08));
  overflow-x: auto;
  scrollbar-width: none;
}
.cm-tabs::-webkit-scrollbar{ display: none; }

.cm-tab{
  appearance: none;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.06);
  color: #d7f0f0;
  font-weight: 700;
  border-radius: 999px;
  padding: 8px 12px;
  font-size: 13px;
  letter-spacing: .02em;
  cursor: pointer;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.1);
  transition: transform .12s ease, filter .2s ease, box-shadow .2s ease;
}
.cm-tab:active{ transform: translateY(1px); }
.cm-tab[aria-selected="true"]{
  background: linear-gradient(180deg, #2ad3c9, #0ea5a5);
  color: #062f2f;
  border-color: rgba(14,165,165,.7);
  box-shadow: 0 6px 16px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.4);
}
.cm-tab:focus-visible{ outline: 2px solid #0ea5a5; outline-offset: 2px; }

/* Panel viewport */
.cm-body{
  position: relative;
  flex: 1;
  background: linear-gradient(180deg, #0f1919, #0b1515);
  padding: 10px;
  overflow: hidden;
}
.cm-body::before{
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(420px circle at 100% 0%, rgba(14,165,165,.18), transparent 60%),
    radial-gradient(380px circle at 0% 100%, rgba(255,215,0,.12), transparent 65%);
  pointer-events: none;
}

.cm-panel{
  position: relative;
  height: 100%;
  overflow: auto;
  padding: 6px;
  display: none;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}
.cm-panel[aria-hidden="false"]{
  display: block;
  animation: cmPanelIn .2s ease;
}
@keyframes cmPanelIn{
  from{ opacity: 0; transform: translateY(6px); }
  to{ opacity: 1; transform: translateY(0); }
}

/* Cards inside panels */
.cm-card{
  background: linear-gradient(180deg, #fff7d5, #f3e0a6);
  color: #1a1f1f;
  border-radius: 14px;
  box-shadow: 0 12px 32px rgba(0,0,0,.35), inset 0 0 0 1px rgba(0,0,0,.12);
  border: 1px solid rgba(0,0,0,.12);
  padding: 16px 18px;
  margin-bottom: 12px;
}
.cm-panel .cm-card:last-child{ margin-bottom: 0; }
@media (prefers-color-scheme: dark){
  .cm-card{
    background: linear-gradient(180deg, #0f1a1a, #0c1414);
    color: #dbeef0;
    border-color: rgba(255,255,255,.08);
    box-shadow: 0 12px 32px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.06);
  }
}

/* Card typography */
.cm-card-head{
  font-weight: 800;
  margin-bottom: 6px;
  font-size: clamp(16px, 2.5vw, 18px);
}
.cm-card-sub{ margin: 0 0 10px 0; opacity: .85; }
.cm-list{ padding-left: 16px; margin: 8px 0 12px 0; }
.cm-list li{ margin: 6px 0; }
.cm-note{ font-size: 13px; opacity: .8; }

/* Tiles / links inside cards */
.cm-tiles{
  display: grid;
  gap: 8px;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  margin-top: 10px;
}
@media (max-width: 420px){
  .cm-tiles{ grid-template-columns: 1fr; }
}
.cm-tile{
  display: inline-flex; align-items: center; justify-content: center;
  padding: 10px 12px; border-radius: 10px; text-decoration: none; cursor: pointer;
  background: linear-gradient(180deg, #9fe7e2, #66cfc8);
  color: #083f3f; font-weight: 700; border: 0;
  box-shadow: 0 2px 6px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.4);
  transition: filter .2s ease, transform .12s ease;
}
.cm-tile:hover{ filter: brightness(1.05); }
.cm-tile:active{ transform: translateY(1px); }
.cm-tile:focus-visible{ outline: 2px solid #0ea5a5; outline-offset: 2px; }

/* Simple two-column grid in a card */
.cm-grid2{ display: grid; gap: 12px; grid-template-columns: 1fr; }
@media (min-width: 640px){
  .cm-grid2{ grid-template-columns: 1fr 1fr; }
}

.eq-list{
  display:flex;
  flex-direction:column;
  gap:8px;
  max-height:100%;
  overflow:auto;
}
.eq-row{
  width:100%;
  border-radius:12px;
  padding:8px 10px;
  background:#0f1515;
  color:#d7f0f0;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);
  display:flex;
  align-items:flex-start;
  gap:10px;
}
.eq-body{
  flex:1;
  border:0;
  background:transparent;
  text-align:left;
  color:inherit;
  display:flex;
  flex-direction:column;
  gap:4px;
  cursor:pointer;
}
.eq-body:focus-visible{
  outline:2px solid #0ea5a5;
  outline-offset:2px;
}
.eq-equation{
  font-weight:700;
  color:rgb(21, 199, 4);
  font-size:clamp(16px, 2.6vw, 20px);
  line-height:1.35;
}
.eq-equation .eq-result-group{
  color:rgb(179, 179, 179);
}
.eq-meta{
  font-size:12px;
  opacity:.75;
  cursor:pointer;
}
.eq-meta.hold{
  opacity:1;
  text-decoration:underline;
}
.eq-empty{
  font-size:13px;
  opacity:.8;
}
.eq-actions{
  display:flex;
  flex-direction:row;
  justify-content:flex-end;
  gap:6px;
  align-self:center;
}
.eq-actions button{
  border:0;
  width:30px;
  height:30px;
  border-radius:8px;
  background:rgba(255,255,255,.08);
  color:#e5f6f6;
  cursor:pointer;
}
.eq-actions button:hover{
  background:rgba(255,255,255,.18);
}
.eq-actions button:focus-visible{
  outline:2px solid #0ea5a5;
  outline-offset:2px;
}

	  /* Fraction rounding arrow polish */
#fractionLine::first-letter {}
#fractionLine {
  letter-spacing: .01em;
}
#fractionLine:has(> .arrow) { /* optional if you wrap the arrow in a span */
  gap: .35rem;
}
.arrow {
  opacity: .9;
  margin-right: .35rem;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size:1.2em;
  line-height:1;
  padding:0 .15rem;
}

#fractionLine { display:inline-flex; align-items:baseline; gap:.3rem; }
	  
	  
/* Motion preferences */
@media (prefers-reduced-motion: reduce){
  .cm-panel{ animation: none !important; }
  .cm-tab, .cm-iconbtn, .cm-tile{ transition: none !important; }
}
	  
	 .cm-groupgrid{
  display:grid; gap:12px;
  grid-template-columns:1fr;
}
@media (min-width:640px){ .cm-groupgrid{ grid-template-columns:1fr 1fr; } }

.mc-card{
  border-radius:12px; padding:12px; cursor:pointer;
  background:linear-gradient(180deg,#162121,#0f1515);
  color:#d7f0f0; border:1px solid rgba(255,255,255,.08);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.04), 0 6px 18px rgba(0,0,0,.25);
}
.mc-title{ font-weight:800; margin-bottom:6px; font-size:clamp(14px,2.2vw,16px) }
.mc-slots{
  display:grid; gap:8px; grid-template-columns:repeat(2,1fr);
}
.mc-slot{
  display:flex; align-items:center; justify-content:space-between; gap:8px;
  background:#0f1515; border:1px solid rgba(255,255,255,.08); border-radius:10px; padding:8px 10px;
}
.mc-k{ opacity:.7; }
.mc-v{ font-weight:800; }
 
.mem-livegrid{
  margin-top: 8px;
  padding: 8px;
  color: #e9f5f5;
  border-radius: 7px;
  background: #2f4f4f;
  border: 1px solid rgba(255,255,255,.08);
  display:flex;
  flex-direction:column;
  gap:8px;
}
.mem-live-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  font-weight:700;
  font-size:clamp(13px,2.1vw,14px);
}
.mem-live-note{
  font-size:12px;
  opacity:.75;
}
.mem-live-row{
  display:grid;
  grid-template-columns:repeat(5,minmax(0,1fr));
  gap:6px;
}
.mem-sets{
  margin-top:14px;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.mem-sets-heading{
  display:flex;
  align-items:center;
  justify-content:space-between;
  font-weight:700;
}
.mem-sets-list{
  display:flex;
  flex-direction:column;
  gap:10px;
  max-height:320px;
  overflow-y:auto;
  padding-right:2px;
}
.mem-set-row{
  border-radius:7px;
  padding:8px;
  background:#2f4f4f;
  border:1px solid rgba(255,255,255,.08);
  display:flex;
  flex-direction:column;
  gap:5px;
}
.mem-set-header{
  display:flex;
  align-items:center;
  gap:10px;
}
.mem-set-actions{
  display:flex;
  align-items:center;
  gap:10px;
}
.mem-set-name{
  flex:1;
  border-radius:4px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.04);
  color:#d7f0f0;
  font-weight:600;
  padding:6px 8px;
}
.mem-set-name::placeholder{ color:rgba(255,255,255,.45); }
.mem-set-action{
  border:0;
  border-radius:8px;
  background:rgba(255,255,255,.08);
  color:#e5f6f6;
  width:32px;
  height:32px;
  font-size:16px;
  cursor:pointer;
}
.mem-set-action:hover{ background:rgba(255,255,255,.16); }
.mem-set-action:focus-visible{ outline:2px solid #0ea5a5; outline-offset:2px; }
.mem-set-buttons{
  display:grid;
  grid-template-columns:repeat(5,minmax(0,1fr));
  gap:8px;
}
.mem-set-slot{
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  border:0;
  border-radius:5px;
  padding:10px 6px;
  min-height:44px;
  font-weight:700;
  font-size:clamp(14px,2.3vw,16px);
  background:var(--mem, lightskyblue);
  color:#083f3f;
  box-shadow:0 2px 4px rgba(0,0,0,.2), inset 0 1px 0 rgba(255,255,255,.12);
  cursor:pointer;
}
.mem-set-slot:hover:not(.empty){
  filter:brightness(1.05);
}
.mem-set-slot:focus-visible{
  outline:2px solid #0ea5a5;
  outline-offset:2px;
}
.mem-set-slot.empty{
  opacity:.6;
  cursor:default;
}
.mem-live-slot{
  cursor:default;
}
.mem-live-slot:disabled{
  opacity:.85;
  filter:none;
}
.mem-sets-empty{
  font-size:13px;
  opacity:.75;
}
.chalk-width-grid{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:10px;
  margin-bottom:12px;
}
.chalk-field label{
  display:block;
  font-size:12px;
  margin-bottom:2px;
  opacity:.8;
}
.chalk-field input{
  width:100%;
  border-radius:8px;
  border:1px solid rgba(0,0,0,.25);
  padding:6px 8px;
  font-size:14px;
  background:#fff;
}
@media (prefers-color-scheme: dark){
  .chalk-field input{
    background:#0b1515;
    color:#f5fffb;
    border-color:rgba(255,255,255,.18);
  }
}
.chalk-calc-btn{
  width:100%;
  justify-content:center;
  margin-top:4px;
}
.chalk-mode-status{
  margin-top:12px;
  font-size:13px;
  opacity:.85;
}
.chalk-results{
  margin-top:8px;
  border-radius:10px;
  padding:10px;
  background:#0f1515;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);
  max-height:260px;
  overflow-y:auto;
  color:#f3fff4;
}
.chalk-results-empty{
  font-size:13px;
  opacity:.8;
}
.chalk-row{
  display:flex;
  justify-content:flex-start;
  align-items:center;
  gap:10px;
  padding:6px 0;
  border-bottom:1px dashed rgba(255,255,255,.08);
}
.chalk-row:last-child{ border-bottom:none; }
.chalk-pos-in{
  font-size:clamp(18px, 3.3vw, 22px);
  font-weight:800;
  color:#e8fff0;
}

/* ===== Segment Tape (embedded) ===== */
#segmentTapeCard{
  --seg-yellow: var(--num, lightyellow);
  --seg-blue: var(--mem, lightblue);
  --seg-green: lightgreen;
}
#segmentTapeCard .segment-wrap{
  font-size:18px;
  padding:6px;
  width:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
  user-select:none;
  font-family:"dunbar-tall", sans-serif;
  color:#111;
}
#segmentTapeCard .tab-container{
  display:flex;
  width:100%;
}
#segmentTapeCard .tab{
  flex:1;
  padding:15px;
  font-size:19px;
  cursor:pointer;
  border-left:1px solid #363636;
  border-right:1px solid #363636;
  border-bottom:1px solid #363636;
  text-align:center;
  background-color:var(--seg-yellow);
  border-top-left-radius:8px;
  border-top-right-radius:8px;
  margin-top:5px;
}
#segmentTapeCard .tab.active{
  background-color:#ccc;
  border-bottom:0px;
  border-top-left-radius:10px;
  border-top-right-radius:10px;
  margin-top:0px;
}
#segmentTapeCard #equalTab.active{
  background-color:var(--seg-blue);
  border-left:0px;
}
#segmentTapeCard #nearTab.active{
  background-color:var(--seg-green);
  border-right:0px;
}
#segmentTapeCard .lightgreen-bg{
  background-color:var(--seg-green) !important;
}
#segmentTapeCard .input-container{
  display:flex;
  justify-content:space-between;
  width:100%;
}
#segmentTapeCard .input-container div{
  flex:1;
  text-align:center;
}
#segmentTapeCard input{
  font-size:18px;
  max-width:100%;
  text-align:center;
  padding:10px;
  margin-top:10px;
  background-color:var(--seg-yellow);
  width:70%;
  font-family:"dunbar-tall", sans-serif;
  cursor:pointer;
}
#segmentTapeCard #marksResult{
  text-align:center;
  max-height:42vh;
  overflow-y:auto;
  padding:8px 12px;
  -webkit-overflow-scrolling:touch;
  overscroll-behavior:contain;
}
#segmentTapeCard #marksResult hr{
  border:none;
  border-top:1px solid #c8c8c8;
  margin:6px 0;
}
#segmentTapeCard #segmentResult{
  text-align:center;
}
#segmentTapeCard .length,
#segmentTapeCard .burn,
#segmentTapeCard .segmentType{
  width:33%;
  float:left;
  text-align:center;
  padding-top:15px;
  padding-bottom:14px;
  background-color:var(--seg-blue);
  border-bottom:1px solid #363636;
}
#segmentTapeCard .burn{
  width:34%;
}
#segmentTapeCard .resultsBG{
  text-align:center;
  background-color:var(--seg-yellow);
  width:100%;
}
#segmentTapeCard .factor sup,
#segmentTapeCard .factor sub{
  font-size:0.85em;
}
#segmentTapeCard .readme-container{
  display:flex;
  justify-content:space-between;
  text-align:center;
  width:100%;
  border:none;
}
#segmentTapeCard .readme-container button{
  flex:1;
  text-align:center;
  text-decoration:underline;
  background-color:var(--seg-yellow);
  border:none;
  border-bottom-left-radius:10px;
  border-bottom-right-radius:10px;
  font-size:18px;
  padding-bottom:10px;
  font-family:"dunbar-tall", sans-serif;
}
#segmentTapeCard .close-btn{
  text-decoration:underline;
  cursor:pointer;
}
#segmentTapeCard .modal{
  display:none;
  position:fixed;
  z-index:40;
  left:0;
  top:0;
  width:100%;
  height:100%;
  background-color:rgba(0,0,0,0.4);
}
#segmentTapeCard #showModalBtn{
  color:black;
  cursor:pointer;
}
#segmentTapeCard .modal-content{
  background-color:var(--seg-yellow);
  margin:5% auto;
  padding:20px;
  border-radius:14px;
  border:1px solid #888;
  width:80%;
  max-height:calc(100vh - 40px);
  overflow-y:auto;
}
@media screen and (orientation:landscape){
  #segmentTapeCard .modal-content{
    max-height:calc(100vh - 80px);
  }
}
@media (min-width:601px){
  #segmentTapeCard .segment-wrap{
    margin:0 auto;
    max-width:600px;
  }
}
#segmentTapeCard .tape-wrapper{
  width:100%;
  background:var(--seg-yellow);
  border:1px solid #1b1b1b;
  border-radius:12px;
  margin:8px 0 6px;
  box-shadow:inset 0 1px 0 rgba(255,255,255,.6), inset 0 -2px 0 rgba(0,0,0,.06);
}
#segmentTapeCard .tape-head{
  display:flex;
  align-items:center;
  gap:8px;
  padding:8px 10px;
}
#segmentTapeCard .tape-head .spacer{
  flex:1;
}
#segmentTapeCard .tape-head .label{
  min-width:140px;
  text-align:center;
  font-weight:600;
}
#segmentTapeCard .tape-btn{
  appearance:none;
  border:1px solid #1b1b1b;
  background:#fff;
  padding:6px 12px;
  border-radius:10px;
  cursor:pointer;
  font-size:16px;
  font-family:"dunbar-tall", sans-serif;
  box-shadow:0 1px 0 rgba(0,0,0,.06);
}
#segmentTapeCard .tape-btn:active{
  transform:translateY(1px);
}
#segmentTapeCard #tapeContainer{
  width:100%;
  height:114px;
  position:relative;
  overflow:hidden;
  border-top:1px solid #1b1b1b;
  border-bottom-left-radius:12px;
  border-bottom-right-radius:12px;
  touch-action:pan-y;
}
#segmentTapeCard #tapeContainer svg{
  display:block;
  width:100%;
  height:120px;
}
#segmentTapeCard .pill{
  display:inline-block;
  font-size:18px;
  font-family:"dunbar-tall", sans-serif;
  background:#fff;
  border:1px solid #1b1b1b;
  border-radius:999px;
  padding:4px 12px;
  line-height:1;
  color:#111;
}
#segmentTapeCard .pill small{
  opacity:.9;
}
#segmentTapeCard .tape-btn,
#segmentTapeCard .tab,
#segmentTapeCard .pill,
#segmentTapeCard .label,
#segmentTapeCard #tapeContainer,
#segmentTapeCard .readme-container button{
  -webkit-user-select:none;
  user-select:none;
  -webkit-touch-callout:none;
  -webkit-tap-highlight-color:transparent;
  -ms-user-select:none;
}
#segmentTapeCard .tape-btn{
  touch-action:manipulation;
}
